<!DOCTYPE html>
<html lang="fa" dir="rtl" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Ø¨Ø§Ù†Ú© Ø³ÙˆØ§Ù„Ø§Øª</title>

    <style>
        body {
            font-family: sans-serif;
            background-color: #f6f7f9;
        }

        h2 {
            text-align: center;
            margin-top: 40px;
            margin-bottom: 8px;
        }

        .subtitle {
            text-align: center;
            font-size: 14px;
            color: #555;
            margin-bottom: 20px;
        }

        .page-container {
            max-width: 1100px;
            margin: 0 auto;
            background: #ffffff;
            padding: 24px;
            border-radius: 8px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th, td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: center;
            font-size: 14px;
        }

        th {
            background-color: #f0f0f0;
        }

        .empty-row {
            color: #777;
            text-align: center;
        }

        /* ===== ÙØ±Ù… Ø¯Ø§Ø®Ù„ Ø³ØªÙˆÙ† Ø¹Ù…Ù„ÛŒØ§Øª ===== */
        .inline-form {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }

        .score-input {
            width: 80px;
            height: 36px;
            padding: 6px 8px;
            font-size: 13px;
            border: 1px solid #ccc;
            border-radius: 6px;
            box-sizing: border-box;
        }
        .message {
            margin-bottom: 16px;
            padding: 10px;
            border-radius: 6px;
            font-size: 14px;
        }

        .success {
            background-color: #e8f5e9;
            color: #2e7d32;
        }

        .error {
            background-color: #fdecea;
            color: #b71c1c;
        }

        .score-input:focus {
            outline: none;
            border-color: #1976d2;
            box-shadow: 0 0 0 2px rgba(25,118,210,0.2);
        }

        .add-button {
            padding: 6px 10px;
            font-size: 13px;
            font-weight: 500;
            background-color: #1976d2;
            color: #ffffff;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition:
                    background-color 0.2s ease,
                    box-shadow 0.2s ease,
                    transform 0.1s ease;
        }

        .add-button:hover {
            background-color: #1565c0;
            box-shadow: 0 3px 8px rgba(25,118,210,0.25);
        }

        .add-button:active {
            transform: translateY(1px);
        }

        .back-link {
            display: inline-block;
            margin-top: 16px;
            text-decoration: none;
            color: #1976d2;
            font-size: 14px;
            font-weight: 500;
        }

        .back-link:hover {
            text-decoration: underline;
        }
    </style>
</head>

<body>

<h2>
    ğŸ¦ Ø¨Ø§Ù†Ú© Ø³ÙˆØ§Ù„Ø§Øª Ø¯ÙˆØ±Ù‡ â€“
    <span th:text="${exam.course.title}"></span>
</h2>

<p class="subtitle">
    Ø¢Ø²Ù…ÙˆÙ†:
    <strong th:text="${exam.title}"></strong>
</p>

<div class="page-container">

    <div th:if="${successMessage}" class="message success">
        <p th:text="${successMessage}"></p>
    </div>

    <div th:if="${errorMessage}" class="message error">
        <p th:text="${errorMessage}"></p>
    </div>
    <table>
        <thead>
        <tr>
            <th>Ø¹Ù†ÙˆØ§Ù† Ø³ÙˆØ§Ù„</th>
            <th>Ù†ÙˆØ¹</th>
            <th colspan="2">Ù†Ù…Ø±Ù‡ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ / Ø¹Ù…Ù„ÛŒØ§Øª</th>
        </tr>
        </thead>

        <tbody>
        <tr th:if="${#lists.isEmpty(questions)}">
            <td colspan="4" class="empty-row">
                Ø³ÙˆØ§Ù„ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø¯ÙˆØ±Ù‡ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.
            </td>
        </tr>

        <tr th:each="q : ${questions}">
            <td th:text="${q.title}"></td>
            <td th:text="${q.questionType}"></td>

            <!-- Ù†Ù…Ø±Ù‡ + Ø¹Ù…Ù„ÛŒØ§Øª Ø¯Ø± ÛŒÚ© ÙØ±Ù… -->
            <td colspan="2">
                <form th:action="@{/teacher/exams/{id}/questions/bank/add(id=${exam.id})}"
                      method="post"
                      class="inline-form">

                    <input type="hidden"
                           name="questionId"
                           th:value="${q.id}"/>

                    <!-- ØªÙ†Ù‡Ø§ input Ù†Ù…Ø±Ù‡ -->
                    <input type="number"
                           name="defaultScore"
                           step="0.5"
                           min="0"
                           required
                           placeholder="Ù†Ù…Ø±Ù‡"
                           class="score-input"/>

                    <button type="submit" class="add-button">
                        â• Ø§ÙØ²ÙˆØ¯Ù†
                    </button>
                </form>
            </td>
        </tr>

        </tbody>
    </table>

    <a th:href="@{/teacher/exams/{id}/questions(id=${exam.id})}"
       class="back-link">
        â¬… Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ø³ÙˆØ§Ù„Ø§Øª Ø¢Ø²Ù…ÙˆÙ†
    </a>

</div>

</body>
</html>
